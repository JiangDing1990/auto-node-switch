# Auto Node Switch

ğŸš€ **Node.js æ™ºèƒ½ç‰ˆæœ¬ç®¡ç†å·¥å…·** - ä¸ºä¸åŒé¡¹ç›®è‡ªåŠ¨åˆ‡æ¢å¯¹åº”çš„ Node.js ç‰ˆæœ¬

[![npm version](https://badge.fury.io/js/npm.svg)](https://badge.fury.io/js/npm)
[![yarn version](https://badge.fury.io/js/yarn.svg)](https://badge.fury.io/js/yarn)
[![pnpm version](https://badge.fury.io/js/pnpm.svg)](https://badge.fury.io/js/pnpm)
[![Node.js Version](https://img.shields.io/badge/node-%3E%3D16-brightgreen.svg)](https://nodejs.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

> **ğŸ‰ æœ€æ–°ç‰ˆæœ¬ v0.1.1** - å¢å¼ºé‡å¤é…ç½®æ£€æµ‹å’Œå®Œå–„æ–‡æ¡£ä½“ç³»ï¼

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸš€ æ ¸å¿ƒåŠŸèƒ½

- ğŸ”„ **è‡ªåŠ¨ç‰ˆæœ¬åˆ‡æ¢**ï¼šè¿›å…¥é¡¹ç›®ç›®å½•æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°æŒ‡å®šçš„ Node.js ç‰ˆæœ¬ï¼Œç¦»å¼€æ—¶è‡ªåŠ¨æ¢å¤
- ğŸ“¦ **å¤šåŒ…ç®¡ç†å™¨æ”¯æŒ**ï¼šå®Œæ•´æ”¯æŒ npmã€yarnã€pnpm å‘½ä»¤æ‹¦æˆªå’Œç‰ˆæœ¬ç®¡ç†
- ğŸ¯ **æ™ºèƒ½ç‰ˆæœ¬ç®¡ç†**ï¼šæ”¯æŒ `npm run dev`ã€`yarn start`ã€`pnpm dev` ç­‰å‘½ä»¤çš„æ™ºèƒ½ç‰ˆæœ¬ç®¡ç†
- âš¡ **ä¸€é”®åœæ­¢**ï¼š`Ctrl+C` åœæ­¢æœåŠ¡å¹¶è‡ªåŠ¨æ¢å¤ç‰ˆæœ¬

### ğŸ›¡ï¸ å®‰å…¨ä¸ç¨³å®šæ€§

- ğŸ”’ **ä¼ä¸šçº§å®‰å…¨**ï¼šå†…ç½®è·¯å¾„æ³¨å…¥é˜²æŠ¤ã€ç‰ˆæœ¬éªŒè¯ã€Shell è½¬ä¹‰ç­‰å¤šé‡å®‰å…¨æœºåˆ¶
- ğŸ’¾ **è‡ªåŠ¨å¤‡ä»½**ï¼šé…ç½®æ–‡ä»¶è‡ªåŠ¨å¤‡ä»½ï¼Œæ”¯æŒç‰ˆæœ¬å†å²å’Œæ¢å¤
- ğŸ”§ **åŸå­æ“ä½œ**ï¼šHook ç”Ÿæˆé‡‡ç”¨å¤‡ä»½-å†™å…¥-éªŒè¯çš„åŸå­æ“ä½œæ¨¡å¼
- ğŸ› ï¸ **é”™è¯¯æ¢å¤**ï¼šå®Œå–„çš„é”™è¯¯å¤„ç†å’Œè‡ªåŠ¨æ¢å¤æœºåˆ¶

### ğŸ”§ å…¼å®¹æ€§æ”¯æŒ

- ğŸ”¨ **ç‰ˆæœ¬ç®¡ç†å™¨**ï¼šå…¼å®¹ nvmã€nã€fnmã€nvm-windowsã€nvs ç­‰ä¸»æµå·¥å…·
- ğŸš **å¤š Shell æ”¯æŒ**ï¼šå®Œæ•´æ”¯æŒ Bashã€Zshã€Fishã€PowerShellï¼ˆåŒ…æ‹¬ Core ç‰ˆæœ¬ï¼‰
- ğŸ“ **é…ç½®ç®¡ç†**ï¼šç¬¦åˆ XDG Base Directory è§„èŒƒçš„ç°ä»£åŒ–é…ç½®ç®¡ç†
- ğŸŒ **è·¨å¹³å°**ï¼šåŸç”Ÿæ”¯æŒ macOSã€Linuxã€Windows ç³»ç»Ÿ

### ğŸ–¥ï¸ ç”¨æˆ·ä½“éªŒ

- âœ¨ **äº¤äº’ç•Œé¢**ï¼šç¾è§‚çš„ç»ˆç«¯äº¤äº’ç•Œé¢ï¼Œæ”¯æŒé”®ç›˜å¯¼èˆªå’Œå®æ—¶åé¦ˆ
- ğŸ“‹ **å‘½ä»¤è¡Œæ¨¡å¼**ï¼šå®Œæ•´çš„ CLI å‘½ä»¤æ”¯æŒï¼Œé€‚åˆè„šæœ¬åŒ–å’Œè‡ªåŠ¨åŒ–
- ğŸ¨ **ASCII è‰ºæœ¯**ï¼šç²¾ç¾çš„ç»ˆç«¯æ¨ªå¹…å’ŒçŠ¶æ€æç¤º
- ğŸ“ **è‡ªé€‚åº”å¸ƒå±€**ï¼šæ ¹æ®ç»ˆç«¯å°ºå¯¸è‡ªåŠ¨è°ƒæ•´æ˜¾ç¤ºå†…å®¹

> ğŸ“‹ **æŸ¥çœ‹æ›´æ–°æ—¥å¿—**: [CHANGELOG.md](./CHANGELOG.md) - äº†è§£æœ€æ–°ç‰ˆæœ¬çš„è¯¦ç»†æ›´æ–°å†…å®¹

## ğŸ“¦ å®‰è£…

### å…¨å±€å®‰è£…ï¼ˆæ¨èï¼‰

```bash
npm install -g auto-node-switch
```

### ä½¿ç”¨ yarn

```bash
yarn global add auto-node-switch
```

### ä½¿ç”¨ pnpm

```bash
pnpm add -g auto-node-switch
```

### ç³»ç»Ÿè¦æ±‚

- **Node.js**: >= 16.0.0
- **æ“ä½œç³»ç»Ÿ**: macOSã€Linuxã€Windows
- **æ”¯æŒçš„ Shell**:
  - **Unix/Linux**: bash, zsh, fish
  - **Windows**: PowerShell, PowerShell Core
- **ç‰ˆæœ¬ç®¡ç†å™¨**ï¼ˆè‡³å°‘å®‰è£…ä¸€ä¸ªï¼‰:
  - **macOS/Linux**: nvmã€nã€fnm
  - **Windows**: nvm-windowsã€fnmã€nvs

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. äº¤äº’æ¨¡å¼ï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨äº¤äº’ç•Œé¢
auto-node-switch
```

é¦–æ¬¡è¿è¡Œæ—¶ä¼šå¼•å¯¼æ‚¨å®Œæˆåˆå§‹è®¾ç½®ï¼š

1. é€‰æ‹©ç»ˆç«¯ç±»å‹ï¼ˆzsh/bash/fishï¼‰
2. é€‰æ‹©ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼ˆnvm/n/fnmï¼‰

### 2. å‘½ä»¤è¡Œæ¨¡å¼

```bash
# æŸ¥çœ‹å¸®åŠ©
auto-node-switch help

# æ·»åŠ é¡¹ç›®é…ç½®
auto-node-switch add ~/my-project 18.17.1

# åˆ é™¤é¡¹ç›®é…ç½®
auto-node-switch remove ~/my-project

# æŸ¥çœ‹æ‰€æœ‰é…ç½®
auto-node-switch list

# æŸ¥çœ‹é…ç½®æ–‡ä»¶ä¿¡æ¯
auto-node-switch info

# é‡æ–°ç”Ÿæˆ Shell Hook
auto-node-switch regenerate

# æ¸…ç†æ‰€æœ‰ Hook
auto-node-switch clean
```

## ğŸ“‹ è¯¦ç»†ä½¿ç”¨è¯´æ˜

### æ·»åŠ é¡¹ç›®é…ç½®

#### æ–¹æ³• 1ï¼šäº¤äº’æ¨¡å¼

1. è¿è¡Œ `auto-node-switch`
2. é€‰æ‹©"âš¡ å¿«é€Ÿé…ç½® - æ·»åŠ æ–°é¡¹ç›®é…ç½®"
3. è¾“å…¥é¡¹ç›®è·¯å¾„
4. è¾“å…¥ Node.js ç‰ˆæœ¬

#### æ–¹æ³• 2ï¼šå‘½ä»¤è¡Œæ¨¡å¼

```bash
auto-node-switch add <é¡¹ç›®è·¯å¾„> <Node.jsç‰ˆæœ¬>

# ç¤ºä¾‹
auto-node-switch add ~/projects/my-app 18.17.1
auto-node-switch add /Users/username/work/api-server v20.10.0
auto-node-switch add ./frontend 16
```

### æ”¯æŒçš„ç‰ˆæœ¬æ ¼å¼

- `18.17.1` - å…·ä½“ç‰ˆæœ¬å·
- `v18.17.1` - å¸¦ v å‰ç¼€çš„ç‰ˆæœ¬å·
- `18` - ä¸»ç‰ˆæœ¬å·
- `lts/*` - æœ€æ–° LTS ç‰ˆæœ¬ï¼ˆnvmï¼‰
- `latest` - æœ€æ–°ç‰ˆæœ¬ï¼ˆnvmï¼‰

### ç‰ˆæœ¬æ–‡ä»¶æ”¯æŒ

å·¥å…·ä¼šè‡ªåŠ¨æ£€æµ‹å’Œåˆ›å»ºç‰ˆæœ¬æ–‡ä»¶ï¼š

- `.nvmrc` - nvm é…ç½®æ–‡ä»¶
- `.node-version` - n å’Œå…¶ä»–å·¥å…·çš„é…ç½®æ–‡ä»¶
- `package.json` - è¯»å– engines.node å­—æ®µ

### Shell Hook è¯´æ˜

å·¥å…·ä¼šåœ¨ç›¸åº”çš„ shell é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  Hookï¼š

- **Bash**: `~/.bashrc`, `~/.bash_profile`, `~/.profile`
- **Zsh**: `~/.zshrc`
- **Fish**: `~/.config/fish/config.fish`
- **PowerShell**: `$PROFILE` (Microsoft.PowerShell_profile.ps1)

#### Hook åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **æ™ºèƒ½ç›®å½•æ£€æµ‹**: è¿›å…¥é…ç½®çš„é¡¹ç›®ç›®å½•æ—¶è‡ªåŠ¨åˆ‡æ¢ç‰ˆæœ¬
- ğŸ”„ **è‡ªåŠ¨ç‰ˆæœ¬æ¢å¤**: å‘½ä»¤æ‰§è¡Œå®Œæˆåè‡ªåŠ¨æ¢å¤åˆ°ä¹‹å‰çš„ç‰ˆæœ¬
- ğŸ“¦ **å¤šåŒ…ç®¡ç†å™¨æ”¯æŒ**: å®Œæ•´æ‹¦æˆª npmã€yarnã€pnpm å‘½ä»¤
- ğŸ›¡ï¸ **å®‰å…¨æ‰§è¡Œ**: ç‰ˆæœ¬åˆ‡æ¢å¤±è´¥æ—¶å›é€€åˆ°åŸç”Ÿå‘½ä»¤
- âš¡ **æ€§èƒ½ä¼˜åŒ–**: æ™ºèƒ½ç¼“å­˜å’Œæœ€å°åŒ–ç‰ˆæœ¬åˆ‡æ¢å¼€é”€

#### æ”¯æŒçš„å‘½ä»¤

- `npm install`, `npm run dev`, `npm start` ç­‰æ‰€æœ‰ npm å‘½ä»¤
- `yarn install`, `yarn start`, `yarn build` ç­‰æ‰€æœ‰ yarn å‘½ä»¤
- `pnpm install`, `pnpm dev`, `pnpm build` ç­‰æ‰€æœ‰ pnpm å‘½ä»¤

### é…ç½®æ–‡ä»¶ç®¡ç†

é…ç½®æ–‡ä»¶ä½ç½®ï¼ˆç¬¦åˆ XDG Base Directory è§„èŒƒï¼‰ï¼š

- **ä¸»é…ç½®æ–‡ä»¶**: `~/.config/node-workdir/config.json`
- **å¤‡ä»½ç›®å½•**: `~/.config/node-workdir/backups/`
- **æ—§ç‰ˆè·¯å¾„**: `~/.node_workdir_config.json`ï¼ˆè‡ªåŠ¨è¿ç§»ï¼‰

#### é…ç½®ç‰¹æ€§

- ğŸ”„ **è‡ªåŠ¨è¿ç§»**: æ—§ç‰ˆé…ç½®æ–‡ä»¶è‡ªåŠ¨è¿ç§»åˆ°æ–°ä½ç½®
- ğŸ’¾ **æ—¶é—´æˆ³å¤‡ä»½**: æ¯æ¬¡ä¿®æ”¹è‡ªåŠ¨åˆ›å»ºå¸¦æ—¶é—´æˆ³çš„å¤‡ä»½
- ğŸ”’ **æƒé™ä¿æŠ¤**: é…ç½®æ–‡ä»¶é‡‡ç”¨å®‰å…¨çš„æƒé™è®¾ç½®
- âš¡ **æ™ºèƒ½ç¼“å­˜**: å†…å­˜ç¼“å­˜æœºåˆ¶ï¼Œæå‡é…ç½®è¯»å–æ€§èƒ½

## ğŸ› ï¸ é«˜çº§é…ç½®

### é…ç½®æ–‡ä»¶ç»“æ„

```json
{
	"shell": "zsh",
	"manager": "nvm",
	"workdirs": [
		{
			"dir": "/Users/username/projects/app1",
			"version": "18.17.1"
		},
		{
			"dir": "/Users/username/projects/app2",
			"version": "20.10.0"
		}
	],
	"lastUpdated": "2024-01-15T10:30:00.000Z"
}
```

### é‡æ–°ç”Ÿæˆ Hook

å¦‚æœ shell é…ç½®æ–‡ä»¶è¢«ä¿®æ”¹æˆ–æŸåï¼Œå¯ä»¥é‡æ–°ç”Ÿæˆï¼š

```bash
# å‘½ä»¤è¡Œæ¨¡å¼
auto-node-switch regenerate

# æˆ–åœ¨äº¤äº’æ¨¡å¼ä¸­é€‰æ‹© "ğŸ”„ é‡æ–°ç”ŸæˆHook"
```

### æ¸…ç† Hook

å®Œå…¨ç§»é™¤æ‰€æœ‰ shell hookï¼š

```bash
# å‘½ä»¤è¡Œæ¨¡å¼
auto-node-switch clean

# æˆ–åœ¨äº¤äº’æ¨¡å¼ä¸­é€‰æ‹© "ğŸ§¹ æ¸…ç†æ‰€æœ‰Hook"
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **è·¯å¾„éªŒè¯**: é˜²æ­¢è·¯å¾„æ³¨å…¥æ”»å‡»
- **ç‰ˆæœ¬éªŒè¯**: éªŒè¯ Node.js ç‰ˆæœ¬æ ¼å¼çš„æœ‰æ•ˆæ€§
- **æƒé™æ£€æŸ¥**: ç¡®ä¿å¯¹é…ç½®æ–‡ä»¶çš„å®‰å…¨è®¿é—®
- **å¤‡ä»½æœºåˆ¶**: è‡ªåŠ¨å¤‡ä»½é‡è¦é…ç½®æ–‡ä»¶

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. Hook ä¸ç”Ÿæ•ˆ**

```bash
# é‡æ–°åŠ è½½ shell é…ç½®
source ~/.zshrc  # æˆ–ç›¸åº”çš„é…ç½®æ–‡ä»¶

# æˆ–é‡æ–°ç”Ÿæˆ Hook
auto-node-switch regenerate
```

**2. ç‰ˆæœ¬åˆ‡æ¢å¤±è´¥**

- ç¡®ä¿ç‰ˆæœ¬ç®¡ç†å™¨å·²æ­£ç¡®å®‰è£…
- æ£€æŸ¥æŒ‡å®šçš„ Node.js ç‰ˆæœ¬æ˜¯å¦å·²å®‰è£…
- æŸ¥çœ‹ç»ˆç«¯è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯

**3. é…ç½®æ–‡ä»¶é—®é¢˜**

```bash
# æŸ¥çœ‹é…ç½®æ–‡ä»¶ä¿¡æ¯
auto-node-switch info

# å¦‚éœ€è¦ï¼Œå¯ä»¥åˆ é™¤é…ç½®æ–‡ä»¶é‡æ–°è®¾ç½®
rm ~/.config/node-workdir/config.json

# æŸ¥çœ‹å¤‡ä»½æ–‡ä»¶
ls -la ~/.config/node-workdir/backups/
```

**4. PowerShell é…ç½®é—®é¢˜**

```powershell
# æ£€æŸ¥PowerShellé…ç½®æ–‡ä»¶
Test-Path $PROFILE

# é‡æ–°åŠ è½½PowerShellé…ç½®
. $PROFILE

# æˆ–é‡å¯PowerShellä½¿é…ç½®ç”Ÿæ•ˆ
```

### è·å–å¸®åŠ©

```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
auto-node-switch help

# æŸ¥çœ‹é…ç½®çŠ¶æ€
auto-node-switch list
auto-node-switch info
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ—ï¸ å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ–‡ä»¶å˜åŒ–ï¼‰
npm run dev

# æ„å»º
npm run build

# è¿è¡Œæµ‹è¯•
npm test

# ä»£ç æ£€æŸ¥
npm run test
```
